<h4 mat-dialog-title class="mat-dialog-title">Ajouter un nouveau changement de poste </h4>
<form [formGroup]="addGlobalForm">
    <div mat-dialog-content>
        <div class="col-md-12 row">                    
            <div class="col-md-6">
                <div class="col-md-8">
                    <mat-form-field>
                        <mat-select placeholder="Poste de travail occupé" formControlName="posteTravail" required>
                            <mat-option *ngFor="let posteTravail of posteTravails" [value]="posteTravail.id">
                                {{posteTravail.designation}}
                            </mat-option>                                                
                        </mat-select>
                    </mat-form-field>
                </div>
                <div class="col-md-6">
                    <mat-form-field>
                        <input matInput [matDatepicker]="pickerDu" placeholder="DU" formControlName="dateOccupation" required>
                        <mat-datepicker-toggle matSuffix [for]="pickerDu"></mat-datepicker-toggle>
                        <mat-datepicker #pickerDu></mat-datepicker>
                    </mat-form-field>
                </div>
                <div class="col-md-6">
                    <mat-form-field>
                        <input matInput [matDatepicker]="pickerAu" placeholder="AU" formControlName="dateLiberation" >
                        <mat-datepicker-toggle matSuffix [for]="pickerAu"></mat-datepicker-toggle>
                        <mat-datepicker #pickerAu></mat-datepicker>
                    </mat-form-field>
                </div>             
            </div>
            <div class="col-md-6">
                <div class="col-md-8">
                    <mat-form-field>
                        <input matInput formControlName="nom" placeholder="Motifs de changement de poste" formControlName="motif">
                    </mat-form-field>
                </div>
                <div class="col-md-12">
                    <mat-form-field>
                        <textarea class="textArea" matInput placeholder="Observations" formControlName="observation" ></textarea>
                    </mat-form-field>
                </div>
            </div>
        </div> 
        <div class="col-md-12 row">
            <h4 class="title-row">Risques professionnels</h4>
            <div class="col-md-6">
                <p class="title-champ-1">Liste des risques professionnelles liés aux poste occupés :</p>                    
                <mat-list role="list">
                    <mat-list-item role="listitem" *ngFor="let risque of getRisquePosteOccupe(addGlobalForm.value.posteTravail)">
                        <p class="title-champ">Type :<span class="champ">{{risque.type}}</span></p>
                        <p class="title-champ">Désignation :<span class="champ">{{risque.designation}}</span></p>                                        
                    </mat-list-item>
                </mat-list>
            </div>
            <div class="col-md-6">
                <p class="title-champ-2">Ajouter d'autres risques professionnelles :
                    <span class="btn-add" (click)="onAddRow()" *ngIf="addForm.get('risques')">
                        <button mat-mini-fab>
                            <mat-icon>add</mat-icon>                        
                        </button>
                    </span>
                </p>                    
                <div *ngFor="let row of addForm.get('risques')?.controls;let index = index;" class="col-md-12">
                    <div class="col-md-10">
                        <mat-form-field>
                            <mat-select [formControl]="row.get('designation')" placeholder="sélectionner un risque" required>
                                <mat-option *ngFor="let risquesProfessionnels of risquesProfessionnels" [value]="risquesProfessionnels.designation">
                                   {{risquesProfessionnels.designation}} |  {{risquesProfessionnels.type}}
                                </mat-option>                                                
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="col-md-2"><button mat-icon-button  (click)="onRemoveRow(index)" class="btn-remove"><mat-icon>delete</mat-icon></button>                </div>
                </div>
            </div>
        </div>  
        
    </div>
    <div mat-dialog-actions class="pull-right">
        <button mat-button mat-raised-button class="btn-annuler" (click)="onNoClick()" >Annuler</button>
        <button mat-button mat-raised-button class="btn-ajouter" (click)="onSubmit()" cdkFocusInitial>Ajouter <mat-icon>add</mat-icon></button>
    </div>
</form>